<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=GBK" />
<title>产品指令</title>
<script type="text/javascript" src="../../other/jquery-1.7.2.js"></script>
<script type="text/javascript" src="../../other/css.js"/></script>
<style>
.table{
	width:100%;
	margin-left:-10px;
}
.table tr td{
	border:1px solid black;
	text-align:left;
	padding-left:20px;
}
.table2{
	width:100%;
	margin-left:-10px;
}
.table2 tr td{
	border:1px solid ;
	text-align:center;
}


.style1 {
	color: #008000;
}

div{
	padding-left:3%;
}
.divfirst{
	width:96%;
	background-color:#FFCC99;
}
.divnext{
	border-style: dotted;
	border-color: #C0C0C0;
	display:none;
	width:94%;
	margin-left:1%;
}
</style>

</head>

<body>
<h2>产品 指令</h2>

<h4></h4>
<div class="divfirst"  onclick="javascript:hoverhidden(this)">
yum源
</div>
<div class="divnext">
<table class="table">
		<tr>
			<td colspan="10" rowspan="1"  style="width:100%;background-color:lightgrey">
			<b>制作</b>
			</td>
		</tr>
		<tr>
			<td colspan="4" rowspan="1" style="width:40%"> 
			获得镜像文件 
			</td>
			<td colspan="6" rowspan="1" style="width:60%">
			CentOS-7-x86_64-DVD-1511.iso<br/>
			</td>
		</tr>
		<tr>
			<td colspan="4" rowspan="1" style="width:40%"> 
			把.ios文件当做磁盘挂载在系统上
			</td>
			<td colspan="6" rowspan="1" style="width:60%">
			mount -o loop .iso路径 目标路径
			</td>
		</tr>
		<tr>
			<td colspan="4" rowspan="1" style="width:40%"> 
			从目标路径把 Packages 目录拷贝到 yum源路径下 执行 createrepo . 创建基于rpm包的索引文件
			</td>
			<td colspan="6" rowspan="1" style="width:60%">
			<br/>
			createrepo .<br/>
			</td>
		</tr>
		
		
		
		
</table>
</div>


<h4></h4>
<div class="divfirst"  onclick="javascript:hoverhidden(this)">
制作rpm包
</div>
<div class="divnext"><table class="table">
		<tr>
			<td colspan="10" rowspan="1"  style="width:100%;background-color:lightgrey">
			<b>环境搭建</b>
			</td>
		</tr>
		<tr>
			<td colspan="4" rowspan="1" style="width:40%"> 
			yum install rpmbuild
			</td>
			<td colspan="6" rowspan="1" style="width:60%">安装rpm构建包</td>
		</tr>
		<tr>
			<td colspan="4" rowspan="1" style="width:40%"> 
			yum install rpmdevtools
			</td>
			<td colspan="6" rowspan="1" style="width:60%">安装rpm构建工具</td>
		</tr>
		<tr>
			<td colspan="4" rowspan="1" style="width:40%"> 
			rpmdev-setuptree
			</td>
			<td colspan="6" rowspan="1" style="width:60%">
			生成 rpmbuild 工程 <br/>
			目录结构为 ~/rpmbuild/{BUILD,RPMS,SOURCES,SPECS,SRPMS}<br/>
			BUILD ：构建时 SOURCES解压包后存放的路径,<br/>
			RPMS ：构建后 rpm包存放的路径,<br/>
			SOURCES ：构建前 放置编译过后安装包（格式为.tar.gz）, <br/>
			SPECS ：构建前 放置.spec脚本,<br/>
			SRPMS ：构建后 生成源码rpm包放置的路径 （格式为.src.rpm） <br/>
			</td>
		</tr>
		<tr>
			<td colspan="10" rowspan="1"  style="width:100%;background-color:lightgrey">
			<b>.spec文件配置</b>
			</td>
		</tr>
		<tr>
			<td colspan="4" rowspan="1" style="width:40%"> 
			  touch ~/rpmbuild/SPECS/filename.spec
			</td>
			<td colspan="6" rowspan="1" style="width:60%">生成制作脚本</td>
		</tr>
		<tr>
			<td colspan="10" rowspan="1" style="width:100%">
			<a href="#" onclick="javascript:hovershowhideById('hong')">查看 宏变量 </a>
			<div id="hong" style="display:none">
				<table class="table2">
					<tr>
						<td colspan="1" style="width:25%;background-color:lightgrey">
							<b>宏变量</b>
						</td>
						<td colspan="1" style="width:25%;background-color:lightgrey">
							<b>路径</b>
						</td>
						<td colspan="1" style="width:25%;background-color:lightgrey">
							<b>宏变量</b>
						</td>
						<td colspan="1" style="width:25%;background-color:lightgrey">
							<b>路径</b>
						</td>
					</tr>
					<tr>
						<td style="width:25%">%{_topdir}</td>
						<td style="width:25%">%{getenv:HOME}/rpmbuild(~/rpmbuild)</td>
						<td style="width:25%">%{_rpmdir} </td>
						<td style="width:25%">%{_topdir}/RPMS</td>
					</tr>
					<tr>
						<td style="width:25%">%{_builddir}</td>
						<td style="width:25%">%{_topdir}/BUILD</td>
						<td style="width:25%">$RPM_BUILD_DIR </td>
						<td style="width:25%">%{_topdir}/BUILD</td>
					</tr>
					<tr>
						<td style="width:25%">$RPM_BUILD_ROOT </td>
						<td style="width:25%">%{_topdir}/BUILDROOT</td>
						<td style="width:25%">%{_buildrootdir}</td>
						<td style="width:25%">%{_topdir}/BUILDROOT</td>
					</tr>
					<tr>
						<td style="width:25%">%{_sourcedir}</td>
						<td style="width:25%">%{_topdir}/SOURCES</td>
						<td style="width:25%">%{_specdir}</td>
						<td style="width:25%">%{_topdir}/SPECS</td>
					</tr>
					<tr>
						<td style="width:25%">%{_srcrpmdir}</td>
						<td style="width:25%">%{_topdir}/SRPMS</td>
						<td style="width:25%">%{_sysconfdir} </td>
						<td style="width:25%">/etc</td>
					</tr>
					<tr>
						<td style="width:25%">%{_bindir}</td>
						<td style="width:25%">/usr/bin</td>
						<td style="width:25%"> %{_sbindir} </td>
						<td style="width:25%">/usr/sbin</td>
					</tr>
					<tr>
						<td style="width:25%">%{_datadir}</td>
						<td style="width:25%">/usr/share</td>
						<td style="width:25%">%{_localstatedir} </td>
						<td style="width:25%">/usr/var</td>
					</tr>
					<tr>
						<td style="width:25%">%{_var}</td>
						<td style="width:25%"> /var</td>
						<td style="width:25%">%{_tmppath}</td>
						<td style="width:25%">%{_var}/tmp</td>
					</tr>
				</table>
			</div>
			</td>
		</tr>
		<tr>
			<td colspan="10" rowspan="1" style="width:100%">
			<a href="#" onclick="javascript:hovershowhideById('spec')">查看 kafka-manager.spec </a>
			<div id="spec" style="display:none">
%define _topdir /home/xingzhou/rpmbuild                                                                   <br/>
Name:   kafka-manager-1.3.3.1                                                                             <br/>
Version: java8                                                                                            <br/>
License: GPL                                                                                              <br/>
Release:        1%{?dist}                                                                                 <br/>
BuildArch: noarch                                                                                         <br/>
Summary: kafka-manager-1.3.3.1-linux-x64                                                                  <br/>
                                                                                                          <br/>
Group:  newland                                                                                           <br/>
URL:    http://www.newlandcomputer.com                                                                    <br/>
#SOURCES目录下源码文件名 .tar.gz格式                                                                      <br/>
Source0: %{name}-%{version}.tar.gz                                                                        <br/>
#安装或编译时使用的“虚拟目录” 一般定义为：%{_tmppath}/%{name}-%{version}-%{release}-root                  <br/>
BuildRoot:      %(mktemp -ud %{_tmppath}/%{name}-%{version}-%{release}-XXXXXX)                            <br/>
                                                                                                          <br/>
#发行版标识                                                                                               <br/>
%description                                                                                              <br/>
                                                                                                          <br/>
#预处理脚本                                                                                               <br/>
%prep                                                                                                     <br/>
                                                                                                          <br/>
#把源码包解压并放到 ~/rpmbuild/BUILD目录下                                                                <br/>
%setup -q                                                                                                 <br/>
                                                                                                          <br/>
#rpm安装前执行脚本	创建用户                                                                              <br/>
%pre                                                                                                      <br/>
getent group kafka-manager >/dev/null || groupadd kafka-manager                                           <br/>
getent passwd kafka-manager >/dev/null || useradd -g kafka-manager kafka-manager 2> /dev/null || :        <br/>
                                                                                                          <br/>
#开始把软件安装到虚拟的根目录中 主要就是为了后面的%file服务的                                             <br/>
%install                                                                                                  <br/>
rm -rf %{buildroot}                                                                                       <br/>
#make install DESTDIR=%{buildroot}                                                                        <br/>
mkdir -p $RPM_BUILD_ROOT/etc/kafka/manager/conf                                                           <br/>
mkdir -p $RPM_BUILD_ROOT/usr/lib/kafka/manager/conf                                                       <br/>
mkdir -p $RPM_BUILD_ROOT/usr/lib/kafka/manager/bin                                                        <br/>
mkdir -p $RPM_BUILD_ROOT/usr/lib/kafka/manager/lib                                                        <br/>
mkdir -p $RPM_BUILD_ROOT/var/run/kafka/manager                                                            <br/>
mkdir -p $RPM_BUILD_ROOT/var/log/kafka/manager                                                            <br/>
                                                                                                          <br/>
cp -fr %{_builddir}/%{name}-%{version}/conf/* $RPM_BUILD_ROOT/etc/kafka/manager/conf/                     <br/>
cp -fr %{_builddir}/%{name}-%{version}/bin/*  $RPM_BUILD_ROOT/usr/lib/kafka/manager/bin/                  <br/>
cp -fr %{_builddir}/%{name}-%{version}/lib/*  $RPM_BUILD_ROOT/usr/lib/kafka/manager/lib/                  <br/>
                                                                                                          <br/>
#清理临时文件                                                                                             <br/>
%clean                                                                                                    <br/>
rm -rf %{buildroot}                                                                                       <br/>
                                                                                                          <br/>
#定义那些文件或目录会放入rpm中  需要用应用宏  在虚拟路径下执行                                            <br/>
%files                                                                                                    <br/>
                                                                                                          <br/>
%defattr(-,kafka-manager,kafka-manager,-)                                                                 <br/>
%attr(0755,kafka-manager,kafka-manager) /var/run/kafka/manager                                            <br/>
%attr(-,kafka-manager,kafka-manager) /usr/lib/kafka/manager                                               <br/>
%attr(-,kafka-manager,kafka-manager) /var/log/kafka/manager                                               <br/>
%attr(-,kafka-manager,kafka-manager) /etc/kafka/manager                                                   <br/>
                                                                                                          <br/>
#rpm安装之后执行脚本                                                                                      <br/>
%post                                                                                                     <br/>
                                                                                                          <br/>
#rpm卸载之前执行脚本                                                                                      <br/>
%preun                                                                                                    <br/>
                                                                                                          <br/>
#rpm卸载后执行的脚本                                                                                      <br/>
%postun                                                                                                   <br/>
                                                                                                          <br/>
#变更日志                                                                                                 <br/>
%changelog                                                                                                <br/>


			</div>
			</td>
		</tr>
		<tr>
			<td colspan="4" rowspan="1" style="width:40%"> 
			  rpmbuild -ba kafka-manager.spec
			</td>
			<td colspan="6" rowspan="1" style="width:60%">制作rpm包</td>
		</tr>
		
</table>
</div>


<h4></h4>
<div class="divfirst"  onclick="javascript:hoverhidden(this)">
svn
</div>
<div class="divnext">
<table class="table">
		<tr>
			<td colspan="10" rowspan="1"  style="width:100%;background-color:lightgrey">
			<b>指令</b>
			</td>
		</tr>
		<tr>
			<td colspan="4" rowspan="1" style="width:40%"> 
			svn checkout svn://192.168.1.1/pro/domain
			</td>
			<td colspan="6" rowspan="1" style="width:60%">检出目录</td>
		</tr>
		<tr>
			<td colspan="4" rowspan="1" style="width:40%"> 
			svn export svn://192.168.1.1/pro/domain/1.txt
			</td>
			<td colspan="6" rowspan="1" style="width:60%">检出文件</td>
		</tr>
		<tr>
			<td colspan="4" rowspan="1" style="width:40%"> 
			  svn add file
			</td>
			<td colspan="6" rowspan="1" style="width:60%">添加当前目录下的file</td>
		</tr>
		<tr>
			<td colspan="4" rowspan="1" style="width:40%">svn update/up [-r version] [file]</td>
			<td colspan="6" rowspan="1" style="width:60%">更新 版本 文件</td>
		</tr>
		<tr>
			<td colspan="4" rowspan="1" style="width:40%">svn commit/ci -m "注释" file   </td>
			<td colspan="6" rowspan="1" style="width:60%">提交并加上注释</td>
		</tr>
		<tr>
			<td colspan="4" rowspan="1" style="width:40%">svn delete svn://192.168.1.1/pro/domain/1.txt -m “delete test file”</td>
			<td colspan="6" rowspan="1" style="width:60%">删除并加上注释</td>
		</tr>
		<tr>
			<td colspan="4" rowspan="1" style="width:40%">
			svn info svn://192.168.1.1/pro/domain 
			</td>
			<td colspan="6" rowspan="1" style="width:60%">查看文件详细信息</td>
		</tr>
		<tr>
			<td colspan="4" rowspan="1" style="width:40%"> svn diff/di [-r version A:version B] file  </td>
			<td colspan="6" rowspan="1" style="width:60%">将修改的文件与基础版本比较 [两个版本对比]</td>
		</tr>
		<tr>
			<td colspan="4" rowspan="1" style="width:40%">  svn list/ls [path]  </td>
			<td colspan="6" rowspan="1" style="width:60%">显示path目录下的所有属于版本库的文件和目录</td>
		</tr>
		<tr>
			<td colspan="4" rowspan="1" style="width:40%"> svn mkdir path/URL  </td>
			<td colspan="6" rowspan="1" style="width:60%">创建纳入版本控制下的新目录</td>
		</tr>
		<tr>
			<td colspan="10" rowspan="1"  style="width:100%;background-color:lightgrey">
			<b>冲突</b>
			</td>
		</tr>
		<tr>
			<td colspan="2" rowspan="1" style="width:20%">(e)  edit </td>
			<td colspan="3" rowspan="1" style="width:30%">直接进入编辑</td>
			<td colspan="2" rowspan="1" style="width:20%"> (df) diff-full</td>
			<td colspan="3" rowspan="1" style="width:30%">显示更改至目标文件的所有变化</td>
		</tr>
		<tr>
			<td colspan="2" rowspan="1" style="width:20%"> (r)  resolved  </td>
			<td colspan="3" rowspan="1" style="width:30%">接受合并版本</td>
			<td colspan="2" rowspan="1" style="width:20%">(dc) display-conflict </td>
			<td colspan="3" rowspan="1" style="width:30%">显示所有冲突 </td>
		</tr>
		<tr>
			<td colspan="2" rowspan="1" style="width:20%"> (mc) mine-conflict</td>
			<td colspan="3" rowspan="1" style="width:30%">冲突以本地为准</td>
			<td colspan="2" rowspan="1" style="width:20%">(tc) theirs-conflict </td>
			<td colspan="3" rowspan="1" style="width:30%">冲突以服务器为准 </td>
		</tr>
		<tr>
			<td colspan="2" rowspan="1" style="width:20%"> (mf) mine-full </td>
			<td colspan="3" rowspan="1" style="width:30%">完全以本地为准 </td>
			<td colspan="2" rowspan="1" style="width:20%">(tf) theirs-full  </td>
			<td colspan="3" rowspan="1" style="width:30%">完全以服务器为准</td>
		</tr>
		<tr>
			<td colspan="2" rowspan="1" style="width:20%">(p) postpone </td>
			<td colspan="3" rowspan="1" style="width:30%">标记冲突，稍后解决 </td>
			<td colspan="2" rowspan="1" style="width:20%">(l)  launch  </td>
			<td colspan="3" rowspan="1" style="width:30%">启动外部工具来解决冲突</td>
		</tr>
		<tr>
			<td colspan="2" rowspan="1" style="width:20%">(s)  show all</td>
			<td colspan="3" rowspan="1" style="width:30%">显示全部选项 </td>
			<td colspan="2" rowspan="1" style="width:20%">&nbsp;</td>
			<td colspan="3" rowspan="1" style="width:30%">&nbsp;</td>
		</tr>
		
</table>
</div>


<h4></h4>
<div class="divfirst"  onclick="javascript:hoverhidden(this)">
编译C语言
</div>
<div class="divnext" >
<table class="table">
		<tr>
			<td colspan="10" rowspan="1"  style="width:100%;background-color:lightgrey">
			<b>指令</b>
			</td>
		</tr>
		<tr>
			<td colspan="4" rowspan="1" style="width:40%"> ./configure [--prefix=$targetDir]  </td>
			<td colspan="6" rowspan="1" style="width:60%">第一步</td>
		</tr>
		<tr>
			<td colspan="4" rowspan="1" style="width:40%"> make </td>
			<td colspan="6" rowspan="1" style="width:60%">第二步</td>
		</tr>
		<tr>
			<td colspan="4" rowspan="1" style="width:40%"> make install  </td>
			<td colspan="6" rowspan="1" style="width:60%">第三步</td>
		</tr>
		
</table>
</div>


<h4></h4>
<div class="divfirst"  onclick="javascript:hoverhidden(this)">
maven  http://mvnrepository.com/
</div>
<div class="divnext" >
<table class="table">
		<tr>
			<td colspan="10" rowspan="1"  style="width:100%;background-color:lightgrey">
			<b>指令</b>
			</td>
		</tr>
		<tr>
			<td colspan="4" rowspan="1" style="width:40%"> 
			mvn archetype:create <br/>
			-DgroupId=packageName <br/>
			-DartifactId=projectName  
			</td>
			<td colspan="6" rowspan="1" style="width:60%">普通java项目</td>
		</tr>
		<tr>
			<td colspan="4" rowspan="1" style="width:40%"> 
			 mvn archetype:create <br/>
			-DgroupId=packageName   <br/> 
			-DartifactId=webappName <br/>
			-DarchetypeArtifactId=maven-archetype-webapp
			</td>
			<td colspan="6" rowspan="1" style="width:60%">java web 项目</td>
		</tr>
		<tr>
			<td colspan="4" rowspan="1" style="width:40%">mvn compile  </td>
			<td colspan="6" rowspan="1" style="width:60%">编译源代码</td>
		</tr>
		<tr>
			<td colspan="4" rowspan="1" style="width:40%">
			mvn clean <br/>
			mvn clean install
			</td>
			<td colspan="6" rowspan="1" style="width:60%">清除产生的项目</td>
		</tr>
		<tr>
			<td colspan="4" rowspan="1" style="width:40%"> mvn eclipse:eclipse  </td>
			<td colspan="6" rowspan="1" style="width:60%">生成eclipse项目</td>
		</tr>
		<tr>
			<td colspan="4" rowspan="1" style="width:40%"> mvn idea:idea  </td>
			<td colspan="6" rowspan="1" style="width:60%">生成idea项目</td>
		</tr>
		<tr>
			<td colspan="4" rowspan="1" style="width:40%"> mvn validate  </td>
			<td colspan="6" rowspan="1" style="width:60%">验证工程是否正确</td>
		</tr>
		<tr>
			<td colspan="4" rowspan="1" style="width:40%"> mvn idea:idea  </td>
			<td colspan="6" rowspan="1" style="width:60%">生成idea项目</td>
		</tr>
</table>
</div>

<h4></h4>
<div class="divfirst"  onclick="javascript:hoverhidden(this)">
vnc
</div>
<div class="divnext">
<table class="table">
		<tr>
			<td colspan="10" rowspan="1"  style="width:100%;background-color:lightgrey">
			<b>使用</b>
			</td>
		</tr>
		<tr>
			<td colspan="4" rowspan="1" style="width:40%"> 
			安装
			</td>
			<td colspan="6" rowspan="1" style="width:60%">
			yum -y install tigervnc-server-1.1.0-5.el6.x86_64<br/>
			</td>
		</tr>
		<tr>
			<td colspan="4" rowspan="1" style="width:40%"> 
			配置 vi /etc/sysconfig/vncservers
			</td>
			<td colspan="6" rowspan="1" style="width:60%">
			 <br/>
			VNCSERVERS="1:root 2:hadoop " <br/>
			VNCSERVERARGS[1]="-name root -geometry 1280x720" <br/>
			VNCSERVERARGS[2]="-name hadoop -geometry 800x600" <br/>
			</td>
		</tr>
		<tr>
			<td colspan="4" rowspan="1" style="width:40%"> 
			设置密码 vncpassword
			</td>
			<td colspan="6" rowspan="1" style="width:60%">
			<br/>
			1qaz!QAZ <br/>
			</td>
		</tr>
		<tr>
			<td colspan="4" rowspan="1" style="width:40%"> 
			启动
			</td>
			<td colspan="6" rowspan="1" style="width:60%">
			/etc/init.d/vncserver start<br/>
			</td>
		</tr>
		<tr>
			<td colspan="4" rowspan="1" style="width:40%"> 
			可选操作
			</td>
			<td colspan="6" rowspan="1" style="width:60%">
			用户的HOME目录下生成.vnc/xstartup文件 把最后一行 twm & 改为 gnome &<br/>
			</td>
		</tr>
		
		
		
</table>
</div>


<h4></h4>
<div class="divfirst"  onclick="javascript:hoverhidden(this)">
test
</div>
<div class="divnext">content
</div>



</body>
</html>
